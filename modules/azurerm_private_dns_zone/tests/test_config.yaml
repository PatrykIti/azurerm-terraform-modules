module:
  name: azurerm_private_dns_zone
  path: modules/azurerm_private_dns_zone

baseline_versions:
  terraform: ">= 1.12.2"
  azurerm_provider: "4.57.0"
  go: "1.21"

environment:
  credential_sets:
    - name: arm
      vars:
        - ARM_SUBSCRIPTION_ID
        - ARM_TENANT_ID
        - ARM_CLIENT_ID
        - ARM_CLIENT_SECRET
    - name: azure
      vars:
        - AZURE_SUBSCRIPTION_ID
        - AZURE_TENANT_ID
        - AZURE_CLIENT_ID
        - AZURE_CLIENT_SECRET
  optional_vars:
    - ARM_LOCATION

test_fixtures:
  active:
    - fixtures/basic
    - fixtures/complete
    - fixtures/secure
    - fixtures/negative

# Real tests currently implemented in this module.
test_suites:
  - name: compile-check
    command: "go test ./... -run '^$'"
    requires_azure_credentials: false

  - name: terratest-functional
    tests:
      - TestBasicPrivateDnsZone
      - TestCompletePrivateDnsZone
      - TestSecurePrivateDnsZone
      - TestPrivateDnsZoneValidationRules
      - TestPrivateDnsZoneIntegration
    timeout: 60m
    parallel: true
    requires_azure_credentials: true

  - name: terraform-unit
    command: "terraform test -test-directory=tests/unit"
    requires_azure_credentials: false

  - name: performance-opt-in
    tests:
      - TestPrivateDnsZoneCreationTime
      - TestPrivateDnsZoneScaling
      - TestPrivateDnsZoneUpdatePerformance
      - TestPrivateDnsZoneDestroyPerformance
    timeout: 60m
    parallel: false
    enabled_by_default: false
    requires_azure_credentials: true
