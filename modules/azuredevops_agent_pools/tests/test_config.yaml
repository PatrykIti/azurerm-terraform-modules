# Test configuration for CI/CD integration

test_suites:
  - name: "Basic Tests"
    tests:
      - TestBasicAzuredevopsAgentPools
    parallel: true
    timeout: 15m

  - name: "Complete Tests"
    tests:
      - TestCompleteAzuredevopsAgentPools
      - TestSecureAzuredevopsAgentPools
    parallel: true
    timeout: 30m

  - name: "Integration Tests"
    tests:
      - TestAzuredevopsAgentPoolsFullIntegration
    parallel: false
    timeout: 45m

# Test environment requirements
environment:
  required_vars:
    - AZDO_ORG_SERVICE_URL
    - AZDO_PERSONAL_ACCESS_TOKEN

# Test stages for CI/CD pipelines
stages:
  - name: "validation"
    description: "Validate code and configurations"
    steps:
      - "fmt-check"
      - "lint"
      - "validate-fixtures"
      - "security"

  - name: "unit"
    description: "Run unit tests"
    test_suites:
      - "Basic Tests"
    fail_fast: true

  - name: "integration"
    description: "Run integration tests"
    test_suites:
      - "Complete Tests"
      - "Integration Tests"
    fail_fast: false
