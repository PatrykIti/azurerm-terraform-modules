# Test configuration for CI/CD integration

test_suites:
  - name: "Basic Tests"
    tests:
      - TestBasicAzuredevopsElasticPool
    parallel: true
    timeout: 15m

  - name: "Complete Tests"
    tests:
      - TestCompleteAzuredevopsElasticPool
      - TestSecureAzuredevopsElasticPool
    parallel: true
    timeout: 30m

  - name: "Validation Tests"
    tests:
      - TestAzuredevopsElasticPoolValidationRules
    parallel: true
    timeout: 10m

  - name: "Integration Tests"
    tests:
      - TestAzuredevopsElasticPoolFullIntegration
    parallel: false
    timeout: 45m

# Test environment requirements
environment:
  required_vars:
    - AZDO_ORG_SERVICE_URL
    - AZDO_PERSONAL_ACCESS_TOKEN
    - AZDO_TEST_SERVICE_ENDPOINT_ID
    - AZDO_TEST_SERVICE_ENDPOINT_SCOPE
    - AZDO_TEST_AZURE_RESOURCE_ID

# Test stages for CI/CD pipelines
stages:
  - name: "validation"
    description: "Validate code and configurations"
    steps:
      - "fmt-check"
      - "lint"
      - "validate-fixtures"
      - "security"

  - name: "unit"
    description: "Run unit and validation tests"
    test_suites:
      - "Basic Tests"
      - "Validation Tests"
    fail_fast: true

  - name: "integration"
    description: "Run integration tests"
    test_suites:
      - "Complete Tests"
      - "Integration Tests"
    fail_fast: false
